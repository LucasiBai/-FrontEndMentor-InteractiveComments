<article class="comment-article__box">
  <div class="comment-card__box">
    <div class="comment-header">
      <app-user-icon [user]="comment.user"></app-user-icon>
      <h4>{{ comment.user.username }}</h4>
      <h6>{{ comment.createdAt }}</h6>
      <h6 *ngIf="ownComment">You</h6>
    </div>

    <app-comment-content
      [comment]="{ content: comment.content, replyingTo: comment.replyingTo }"
      [updating]="updating"
      (updateContentEvent)="updateComment($event)"
    ></app-comment-content>

    <div class="comment-interactive">
      <ng-container *ngIf="!ownComment; else ownCommentButtons">
        <button (click)="replyComment()">Reply</button>
      </ng-container>

      <ng-template #ownCommentButtons>
        <button (click)="deleteComment()">Delete</button>
        <button (click)="switchUpdating()">Edit</button>
      </ng-template>
    </div>
  </div>

  <app-comment-replies-list
    *ngIf="isReplying || (comment.replies && comment.replies.length > 0)"
    [replies]="comment.replies"
  >
  </app-comment-replies-list>
  <app-input-comment *ngIf="isReplying"></app-input-comment>
</article>
